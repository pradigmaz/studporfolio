<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Портфолио Студента</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">
    <link href="{{ url_for('static', filename='css/bootstrap-utilities.css') }}" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.8/css/intlTelInput.css">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/index-css.css') }}">
</head>
<body>

<div class="container mt-5">
<nav class="navbar navbar-expand-lg navbar-light fixed-top bg-light">
  <div class="container-fluid">
    <a class="navbar-brand">Студпортфолио</a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNav">
      <ul class="navbar-nav ms-auto">
        <li class="nav-item">
          <a class="nav-link active" aria-current="page" href="{{url_for('index_home')}}">Главная</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#">Новости</a>
        </li>
        <li>
          <a class="nav-link" href="{{url_for('about')}}">О нас</a>
        </li>
        {% if current_user.is_authenticated %}
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
            {{ current_user.username }}
          </a>
          <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
            {% if current_user.is_employer %}
            <li><a class="dropdown-item" href="{{ url_for('account', role='employer', identifier=current_user.company_name) }}">Профиль</a></li>
            {% else %}
            <li><a class="dropdown-item" href="{{ url_for('account', role='student', identifier=current_user.username) }}">Профиль</a></li>
            {% endif %}
            <li><hr class="dropdown-divider"></li>
            <li><a class="dropdown-item" href="{{ url_for('logout') }}">Выйти</a></li>
          </ul>
        </li>
        {% else %}
        <li class="nav-item">
          <a class="nav-link" href="#" data-bs-toggle="modal" data-bs-target="#userTypeModal">Войти</a>
        </li>
        {% endif %}
      </ul>
    </div>
  </div>
</nav>

<!-- Общее модальное окно для выбора типа пользователя -->
<div class="modal fade" id="userTypeModal" tabindex="-1" aria-labelledby="userTypeModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title text-primary" id="userTypeModalLabel">Выберите тип пользователя</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <div class="d-grid gap-3">
          <button type="button" class="btn btn-info btn-lg" data-bs-toggle="modal" data-bs-target="#loginModalEmployer">
            <i class="bi bi-briefcase me-2"></i>Работодатель
          </button>
          <button type="button" class="btn btn-dark btn-lg" data-bs-toggle="modal" data-bs-target="#loginModalStudent">
            <i class="bi bi-person me-2"></i>Студент
          </button>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Модальное окно для входа работодателя -->
<div class="modal fade" id="loginModalEmployer" tabindex="-1" aria-labelledby="loginModalEmployerLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header bg-info text-white">
        <h5 class="modal-title" id="loginModalEmployerLabel">
          <i class="bi bi-briefcase-fill me-2"></i>Вход для работодателей
        </h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <form method="post" action="{{ url_for('login') }}">
          {{ employer_login_form.hidden_tag() }}
          <div class="mb-3">
            <label for="employerEmail" class="form-label">
              <i class="bi bi-envelope-fill me-2"></i>{{ employer_login_form.email.label.text }}
            </label>
            {{ employer_login_form.email(class="form-control", id="employerEmail", placeholder="Введите email") }}
          </div>
          <div class="mb-3">
            <label for="employerPassword" class="form-label">
              <i class="bi bi-lock-fill me-2"></i>{{ employer_login_form.password.label.text }}
            </label>
            {{ employer_login_form.password(class="form-control", id="employerPassword", placeholder="Введите пароль") }}
          </div>
          <div class="d-grid">
            <button type="submit" class="btn btn-info btn-block">
              <i class="bi bi-box-arrow-in-right me-2"></i>Войти
            </button>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <p class="text-center w-100 mb-0">
          Нет аккаунта? 
          <a href="#" class="text-decoration-none" data-bs-toggle="modal" data-bs-target="#registerModalEmployer">
            <i class="bi bi-person-plus-fill me-2"></i>Зарегистрироваться
          </a>
        </p>
      </div>
    </div>
  </div>
</div>

<!--Модальное окно для входа студента-->
<div class="modal fade" id="loginModalStudent" tabindex="-1" aria-labelledby="loginModalStudentLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header bg-dark text-white">
        <h5 class="modal-title" id="loginModalStudentLabel">
          <i class="bi bi-person-fill me-2"></i>Вход для студентов
        </h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <form method="post" action="{{ url_for('login') }}">
          {{ student_login_form.hidden_tag() }}
          <div class="mb-3">
            <label for="studentUsernameEmail" class="form-label">
              <i class="bi bi-envelope-fill me-2"></i>{{ student_login_form.username_email.label.text }}
            </label>
            {{ student_login_form.username_email(class="form-control", id="studentUsernameEmail", placeholder="Введите email или имя пользователя") }}
          </div>
          <div class="mb-3">
            <label for="studentPassword" class="form-label">
              <i class="bi bi-lock-fill me-2"></i>{{ student_login_form.password.label.text }}
            </label>
            {{ student_login_form.password(class="form-control", id="studentPassword", placeholder="Введите пароль") }}
          </div>
          <div class="d-grid">
            <button type="submit" class="btn btn-dark btn-block">
              <i class="bi bi-box-arrow-in-right me-2"></i>Войти
            </button>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <p class="text-center w-100 mb-0">
          Нет аккаунта? 
          <a href="#" class="text-decoration-none" data-bs-toggle="modal" data-bs-target="#registerModalStudent">
            <i class="bi bi-person-plus-fill me-2"></i>Зарегистрироваться
          </a>
        </p>
      </div>
    </div>
  </div>
</div>

<!-- Модальное окно для регистрации работодателя -->
<div class="modal fade" id="registerModalEmployer" tabindex="-1" aria-labelledby="registerModalEmployerLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header bg-info text-white">
        <h5 class="modal-title" id="registerModalEmployerLabel">
          <i class="bi bi-briefcase-fill me-2"></i>Регистрация работодателя
        </h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body bg-white">
        <form method="post" action="{{ url_for('register') }}">
          {{ employer_register_form.hidden_tag() }}
          <div class="mb-3">
            {{ employer_register_form.company_name.label(class="form-label") }}
            {{ employer_register_form.company_name(class="form-control") }}
          </div>
          <div class="mb-3">
            {{ employer_register_form.contact_name.label(class="form-label") }}
            {{ employer_register_form.contact_name(class="form-control") }}
          </div>
          <div class="mb-3">
            {{ employer_register_form.email.label(class="form-label") }}
            {{ employer_register_form.email(class="form-control") }}
          </div>
          <div class="mb-3">
            {{ employer_register_form.phone_number.label(class="form-label") }}
            {{ employer_register_form.phone_number(class="form-control", placeholder="+7 (___)-___-__-__") }}
          </div>
          <div class="mb-3 position-relative">
            {{ employer_register_form.password.label(class="form-label") }}
            <div class="input-group">
              {{ employer_register_form.password(class="form-control password-toggle") }}
              <span class="input-group-text">
                <i class="bi bi-eye-slash toggle-password" style="cursor: pointer;"></i>
              </span>
              <button type="button" class="btn btn-secondary generate-password">Сгенерировать</button>
            </div>
            <div class="password-strength">
              <div id="employer-password-strength-bar" class="strength-bar"></div>
            </div>
            <small class="form-text text-muted">Пароль должен содержать минимум 8 символов, включая хотя бы одну заглавную букву, цифры и спец. символы.</small>
          </div>
          <div class="mb-3 position-relative">
            {{ employer_register_form.confirm_password.label(class="form-label") }}
            <div class="input-group">
              {{ employer_register_form.confirm_password(class="form-control password-toggle") }}
              <span class="input-group-text">
                <i class="bi bi-eye-slash toggle-password" style="cursor: pointer;"></i>
              </span>
            </div>
          </div>
          <div class="d-grid gap-2">
            {{ employer_register_form.submit(class="btn btn-info btn-lg") }}
          </div>
        </form>
      </div>
    </div>
  </div>
</div>

<!-- Модальное окно для регистрации студентов -->
<div class="modal fade" id="registerModalStudent" tabindex="-1" aria-labelledby="registerModalStudentLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header bg-dark text-white">
        <h5 class="modal-title" id="registerModalStudentLabel">Регистрация студента</h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body bg-white">
        <form method="post" action="{{ url_for('register') }}">
          {{ student_register_form.hidden_tag() }}
          <div class="mb-3">
            {{ student_register_form.surname.label(class="form-label") }}
            {{ student_register_form.surname(class="form-control") }}
          </div>
          <div class="mb-3">
            {{ student_register_form.first_name.label(class="form-label") }}
            {{ student_register_form.first_name(class="form-control") }}
          </div>
          <div class="mb-3">
            {{ student_register_form.middle_name.label(class="form-label") }}
            {{ student_register_form.middle_name(class="form-control") }}
          </div>
          <div class="mb-3">
            {{ student_register_form.username.label(class="form-label") }}
            {{ student_register_form.username(class="form-control") }}
          </div>
          <div class="mb-3">
            {{ student_register_form.phone_number.label(class="form-label") }}
            {{ student_register_form.phone_number(class="form-control", placeholder="+7 (___)-___-__-__") }}
          </div>
          <div class="mb-3">
            {{ student_register_form.email.label(class="form-label") }}
            {{ student_register_form.email(class="form-control") }}
          </div>
          <div class="mb-3 position-relative">
            {{ student_register_form.password.label(class="form-label") }}
            <div class="input-group">
              {{ student_register_form.password(class="form-control password-toggle") }}
              <span class="input-group-text">
                <i class="bi bi-eye-slash toggle-password" style="cursor: pointer;"></i>
              </span>
              <button type="button" class="btn btn-secondary generate-password">Сгенерировать</button>
            </div>
            <div class="password-strength">
              <div id="student-password-strength-bar" class="strength-bar"></div>
            </div>
            <small class="form-text text-muted">Пароль должен содержать минимум 8 символов, включая хотя бы одну заглавную букву, цифры и спец. символы.</small>
          </div>
          <div class="mb-3 position-relative">
            {{ student_register_form.confirm_password.label(class="form-label") }}
            <div class="input-group">
              {{ student_register_form.confirm_password(class="form-control password-toggle") }}
              <span class="input-group-text">
                <i class="bi bi-eye-slash toggle-password" style="cursor: pointer;"></i>
              </span>
            </div>
          </div>
          <div class="d-grid gap-2">
            {{ student_register_form.submit(class="btn btn-dark btn-lg") }}
          </div>
        </form>
      </div>
    </div>
  </div>
</div>


{% block content %}
        
{% endblock %}
</div>
    <footer class="footer  mt-auto w-100">
        <div class="container">
            <div class="row py-3">
                <div class="col-md-6">
                    <h6>Разделы</h6>
                    <ul class="list-unstyled">
                        <li><a href="#" class="text-decoration-none text-dark">Главная</a></li>
                        <li><a href="#" class="text-decoration-none text-dark">Возможности</a></li>
                        <li><a href="#" class="text-decoration-none text-dark">Цены</a></li>
                        <li><a href="#" class="text-decoration-none text-dark">FAQ</a></li>
                        <li><a href="#" class="text-decoration-none text-dark">О нас</a></li>
                    </ul>
                </div>
                <div class="col-md-6">
                    <h6>Подписка на новости</h6>
                    <form>
                        <div class="input-group mb-3">
                            <input type="email" class="form-control" placeholder="Ваш email">
                            <button class="btn btn-outline-dark" type="submit">Подписаться</button>
                        </div>
                    </form>
                </div>
            </div>
            <div class="row border-top pt-3">
                <div class="col-md-6">
                    <p>© 2024 Company, Inc. Все права защищены.</p>
                </div>
                <div class="col-md-6 text-end">
                    <a href="https://t.me/belkaratarosk" class="text-dark me-3" target="_blank"><i class="bi bi-telegram fs-4"></i></a>
                    <a href="https://github.com/pradigmaz/student_portfolio" class="text-dark" target="_blank"><i class="bi bi-github fs-4"></i></a>
                </div>
            </div>
        </div>
    </footer>

<!-- Скрипт для анимации навбара -->
<script src="{{ url_for('static', filename='js1/main-js.js') }}"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/zxcvbn/4.4.2/zxcvbn.js"></script>
<script src="https://code.jquery.com/jquery-3.7.0.min.js"></script>
<script>
  function checkPasswordStrength(password) {
    let strength = 0;
    if (password.length >= 8) strength += 1;
    if (password.match(/[A-Z]/)) strength += 1;
    if (password.match(/[!@#$%^&*(),.?":{}|<>]/)) strength += 1;

    return strength;
  }

  function updateStrengthBar(strength, barId) {
    const bar = $(barId);
    bar.removeClass('weak medium strong');
    if (strength === 1) {
      bar.addClass('weak');
    } else if (strength === 2) {
      bar.addClass('medium');
    } else if (strength === 3) {
      bar.addClass('strong');
    }
  }

  function generatePassword() {
    const characters = "0123456789@#$%!-&*ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";
    let password = "";
    for (let i = 0; i < 12; i++) {
      password += characters.charAt(Math.floor(Math.random() * characters.length));
    }
    return password;
  }

  $(document).ready(function() {
    $('.password-toggle').on('input', function() {
      const password = $(this).val();
      const strength = checkPasswordStrength(password);
      const barId = $(this).closest('.position-relative').find('.strength-bar').attr('id');
      updateStrengthBar(strength, `#${barId}`);
    });

    $('.generate-password').on('click', function() {
      const password = generatePassword();
      const input = $(this).closest('.position-relative').find('.password-toggle');
      input.val(password).trigger('input');
      const confirmInput = $(this).closest('form').find('input[name$="confirm_password"]');
      confirmInput.val(password);
    });
  });
</script>
</body>
</html>
